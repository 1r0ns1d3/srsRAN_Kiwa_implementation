
#ifndef SRSGNB_MAC_DL_RESULT_H
#define SRSGNB_MAC_DL_RESULT_H

#include "sched_result.h"
#include "srsgnb/adt/byte_buffer.h"
#include "srsgnb/adt/static_vector.h"
#include "srsgnb/ran/slot_point.h"

namespace srsgnb {

constexpr size_t MAX_DL_PDUS_PER_SLOT = 16;

struct dl_ssb_pdu {
  // TODO: Compute necessary size.
  byte_buffer payload;
};

// TODO: Compute necessary size.
using mac_dl_dci_payload = byte_buffer;

struct pdcch_pdu {
  mac_dl_dci_payload dci_payload;
};

/// DL Scheduling Request generated by the MAC and received by the PHY.
/// \remark This struct will be used in FAPI to generate DL_TTI.Request.
struct mac_dl_sched_result {
  const dl_sched_result*                         dl_res;
  optional<dl_ssb_pdu>                           ssb_pdu;
  static_vector<pdcch_pdu, MAX_DL_PDUS_PER_SLOT> pdcch_pdus;
};

/// List of DL PDUs produced by MAC in a given slot and cell.
struct mac_dl_data_result {
  slot_point                                       slot;
  static_vector<byte_buffer, MAX_DL_PDUS_PER_SLOT> pdus;
};

} // namespace srsgnb

#endif // SRSGNB_MAC_DL_RESULT_H
